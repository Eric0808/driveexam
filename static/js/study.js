var o,useranswer;function question(i){var starttime=new Date();target=i;if(target<1)target=1;if(target>counts)target=counts;$.get('/data/question/'+ids[target]+'.txt',function(data){o=jQuery.parseJSON(data);$('#id').html(o.id);$('#result').html('&nbsp;&nbsp;');$('#resulticon').html('');$('#trueresult').html('');$('#image').html('');$('#count').html(counts);$('#target').html(target);$('#explain').html(o.explain);$('#question').html(target+'、'+o.question);$('#prenext').html('<a href="javascript:;" onclick="question('+(target+1)+')">下一题</a><a href="javascript:;" onclick="question('+(target-1)+')">上一题</a>');if(o.type==0){$('#autonextstate').show();$('#item1').html('<input id="_radio1" name="_radio" type="radio" onclick="answer('+target+',1);" /> <label for="_radio1">'+o.item1+'</label>');$('#item2').html('<input id="_radio2" name="_radio" type="radio" onclick="answer('+target+',2);" /> <label for="_radio2">'+o.item2+'</label>');$('#item3').html('');$('#item4').html('');$('#button').html('<a href="javascript:;" onclick="$(\'#_radio2\').click();">×</a><a href="javascript:;" onclick="$(\'#_radio1\').click();">√</a>')};if(o.type==1){$('#autonextstate').show();$('#item1').html('<input id="_radio1" name="_radio" type="radio" onclick="answer('+target+',1);" /> <label for="_radio1">A '+o.item1+'</label>');$('#item2').html('<input id="_radio2" name="_radio" type="radio" onclick="answer('+target+',2);" /> <label for="_radio2">B '+o.item2+'</label>');$('#item3').html('<input id="_radio3" name="_radio" type="radio" onclick="answer('+target+',3);" /> <label for="_radio3">C '+o.item3+'</label>');$('#item4').html('<input id="_radio4" name="_radio" type="radio" onclick="answer('+target+',4);" /> <label for="_radio4">D '+o.item4+'</label>');$('#button').html('<a href="javascript:;" onclick="$(\'#_radio4\').click();">D</a><a href="javascript:;" onclick="$(\'#_radio3\').click();">C</a><a href="javascript:;" onclick="$(\'#_radio2\').click();">B</a><a href="javascript:;" onclick="$(\'#_radio1\').click();">A</a>')};if(o.type==2){$('#autonextstate').hide();if(listype=='exam'){$('#item1').html('<input id="_radio1" name="_radio" type="checkbox" value="A" onchange="answers();" onclick="answers();"/> <label for="_radio1">A '+o.item1+'</label>');$('#item2').html('<input id="_radio2" name="_radio" type="checkbox" value="B" onchange="answers();" onclick="answers();"/> <label for="_radio2">B '+o.item2+'</label>');$('#item3').html('<input id="_radio3" name="_radio" type="checkbox" value="C" onchange="answers();" onclick="answers();"/> <label for="_radio3">C '+o.item3+'</label>');$('#item4').html('<input id="_radio4" name="_radio" type="checkbox" value="D" onchange="answers();" onclick="answers();"/> <label for="_radio4">D '+o.item4+'</label>');$('#button').html('<a href="javascript:;" onclick="$(\'#_radio4\').click();answers();">D</a><a href="javascript:;" onclick="$(\'#_radio3\').click();answers();">C</a><a href="javascript:;" onclick="$(\'#_radio2\').click();answers();">B</a><a href="javascript:;" onclick="$(\'#_radio1\').click();answers();">A</a>')}else{$('#item1').html('<input id="_radio1" name="_radio" type="checkbox" value="A" /> <label for="_radio1">A '+o.item1+'</label>');$('#item2').html('<input id="_radio2" name="_radio" type="checkbox" value="B" /> <label for="_radio2">B '+o.item2+'</label>');$('#item3').html('<input id="_radio3" name="_radio" type="checkbox" value="C" /> <label for="_radio3">C '+o.item3+'</label>');$('#item4').html('<input id="_radio4" name="_radio" type="checkbox" value="D" /> <label for="_radio4">D '+o.item4+'</label>');$('#button').html('<a href="javascript:;" onclick="$(\'#_radio4\').click();">D</a><a href="javascript:;" onclick="$(\'#_radio3\').click();">C</a><a href="javascript:;" onclick="$(\'#_radio2\').click();">B</a><a href="javascript:;" onclick="$(\'#_radio1\').click();">A</a>');$('#item4').html($('#item4').html()+'<br /> <input type="button" name="_bb" id="_bb" onclick="answers();" style="font-size:12px;width:64px;margin-left:24px;" value="提交答案" />')}};if(o.image!=''){var imageurl='http://img.jszks.com'+o.image;if(o.image.indexOf('.swf')>0){$('#image').html('<div class="imgzoom"><embed src="'+imageurl+'" width="220" height="102" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash" wmode="transparent" quality="high"></embed><div class="imgalt" id="bigswf">亲，鼠标移到这即可放大动画</div></div>');$("#bigswf").powerFloat({target:'/ajax/flash.asp?src='+imageurl,targetMode:"ajax"})}else{$('#image').html('<div class="imgzoom"><a href="javascript:;"><img id="imgsrc" src="'+imageurl+'" width="220" height="150" border="0" /></a><div class="imgalt">鼠标移到图片上查看大图片</div></div>')}};if(listype=='exam'){useranswer=$('#_answer'+target).attr('your');$('#_answer'+target).attr('true',o.answer).attr('questionid',o.id);$('#_select'+target).addClass('select');$('#_select'+lastid).removeClass('select');lastid=target;if($('#_answer'+target).attr('flag')=='true'){$('#flag').attr('checked',true);$('#_select'+target).addClass('flag')}else{$('#flag').attr('checked',false);$('#_select'+target).removeClass('flag')};$('#prenext').html('<a href="javascript:;" onclick="send();" class="examsend">交卷</a>'+$('#prenext').html());}else{useranswer=idv['v'+o.id];if(o.explain=='')o.explain='暂无解释';$('#showexplain').poshytip('update','<font style="font-size:14px;line-height:22px;color:green;padding:2px 2px 0;">'+o.explain+'</font>');setbar();};if(useranswer=='')useranswer=0;if(useranswer>0){if(o.type==2){var s='';var y=toanswer(useranswer);for(n=1;n<=4;n++){if(n==1){s='A'};if(n==2){s='B'};if(n==3){s='C'};if(n==4){s='D'};if(y.indexOf(s)>=0)$('#_radio'+n).attr('checked','true');}}else{$('#_radio'+useranswer).attr('checked','true');};if(listype=='exam'){$('#result').html(toanswer(useranswer))}else{if(useranswer==o.answer){$('#useranswer').html('<font color="green">您最后的选择是 '+toanswer(useranswer)+'，是正确滴！</font>')}else{$('#useranswer').html('<font color="red">您最后的选择是 '+toanswer(useranswer)+', 选错了哦！</font>')}}}else{$('#useranswer').html('')};var endtime=new Date(),runtime=endtime.getTime()-starttime.getTime();if(runtime>9){if(runtime>99){if(runtime>999){runtime=runtime/100}else{runtime='0.'+runtime}}else{runtime='0.0'+runtime}}else{runtime='0.00'+runtime};$('#runtime').html(runtime);})};function answers(){if(o.type==2){var getanswers='';for(n=1;n<=4;n++){if($('#_radio'+n).attr('checked')){getanswers=getanswers+$('#_radio'+n).attr('value')}};j=processval(getanswers);answer(target,j);}};function answer(i,j){if(listype=='exam'){examanswer(i,j);return false};idv['v'+ids[i]]=j;$('#result').html(toanswer(j));if(o.answer==j){$('#resulticon').html('&nbsp;&nbsp;<img src="/skin/images/right.png">');$('#trueresult').html('');if(o.explainid>0){$('#trueresult').html('<a href="/jieshi/'+o.explainid+'.html" target="_blank">查看题解</a>')}}else{if(!j){$('#result').html('');$('#resulticon').html('');$('#trueresult').html('')}else{$('#resulticon').html('&nbsp;&nbsp;<img src="/skin/images/error.png">');if(o.explainid>0){$('#trueresult').html('正确答案：'+toanswer(o.answer)+' &nbsp; <a href="/jieshi/'+o.explainid+'.html" target="_blank">查看题解</a>')}else{$('#trueresult').html('正确答案：'+toanswer(o.answer))}}};if(tokenrecord){var iserr;if(o.answer==j){iserr=0}else{iserr=1};$.get('/ajax/token_record.asp',{id:o.id,tokenid:tokenid,answer:j,iserr:iserr,target:target,requestime:new Date().getTime()},function(data){});if(iserr==0){if($('#autonext').attr('checked')){if(target<counts){$('#result').poshytip('hide').poshytip('show');setTimeout("question("+(target+1)+");$('#result').poshytip('hide');",500)}}}}else{if(o.answer!=j&&j!=''){$.get('/ajax/error.asp',{act:'add',id:o.id,tokenid:tokenid,answer:j,requestime:new Date().getTime()},function(data){})}else{if($('#autonext').attr('checked')){if(target<counts){$('#result').poshytip('hide').poshytip('show');setTimeout("question("+(target+1)+");$('#result').poshytip('hide');",500)}}}}};function processval(s){if(s=='A')return 1;if(s=='B')return 2;if(s=='C')return 3;if(s=='D')return 4;if(s=='AB')return 7;if(s=='AC')return 8;if(s=='AD')return 9;if(s=='BC')return 10;if(s=='BD')return 11;if(s=='CD')return 12;if(s=='ABC')return 13;if(s=='ABD')return 14;if(s=='ACD')return 15;if(s=='BCD')return 16;if(s=='ABCD')return 17};function toanswer(j){if(o.type==0){if(j==1)return'√';if(j==2)return'×'};if(o.type==1){if(j==1)return'A';if(j==2)return'B';if(j==3)return'C';if(j==4)return'D'};if(o.type==2){if(j==1)return'A';if(j==2)return'B';if(j==3)return'C';if(j==4)return'D';if(j==7)return'AB';if(j==8)return'AC';if(j==9)return'AD';if(j==10)return'BC';if(j==11)return'BD';if(j==12)return'CD';if(j==13)return'ABC';if(j==14)return'ABD';if(j==15)return'ACD';if(j==16)return'BCD';if(j==17)return'ABCD'}};$('#bar').mouseup(function(e){showbar(e,true)}).mousemove(function(e){showbar(e,false)}).mouseout(function(){setbar()});function showbar(e,ck){var p=$("#bar");var position=p.position();leftx=position.left+1;var x=e.originalEvent.x||e.originalEvent.layerX||0;var y=e.originalEvent.y||e.originalEvent.layerY||0;index=((x-leftx)/704*counts).toFixed(0);index=parseInt(index);if(index==0)index=1;$('#baron').css('width',x-leftx);$('#barnum').text(index).css('background-position',(x-leftx)+'px 0px').css('padding-left',x-leftx);if(ck){question(index)}};function setbar(){var barwidth=(target/counts)*704;$('#baron').css('width',barwidth);$('#barnum').text(target).css('background-position',barwidth+'px 0px').css('padding-left',barwidth);}